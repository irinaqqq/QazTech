<script>
    // JavaScript для добавления новых продуктов
    document.addEventListener('DOMContentLoaded', function () {
        let productItemCounter = 0;
    
        document.getElementById('add-product-item').addEventListener('click', function () {
            productItemCounter++;
    
            // Создание контейнера для нового продукта
            let newProductItem = document.createElement('div');
            newProductItem.classList.add('row', 'g-3');
            newProductItem.id = 'product-item-' + productItemCounter;
    
            newProductItem.innerHTML = `
                <!-- Category -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-category" class="form-label">Категория</label>
                    <select name="product_items-${productItemCounter}-category" id="id_product_items-${productItemCounter}-category" class="form-control" required>
                        <option value="" disabled selected>Выберите категорию</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <!-- Quantity -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-quantity" class="form-label">Количество</label>
                    <input type="number" name="product_items-${productItemCounter}-quantity" required id="id_product_items-${productItemCounter}-quantity" class="form-control" placeholder="Введите количество">
                </div>
                
                <!-- Price -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-price" class="form-label">Цена</label>
                    <input type="text" name="product_items-${productItemCounter}-price" id="id_product_items-${productItemCounter}-price" class="form-control" placeholder="Введите цену">
                </div>
    
                <!-- Processors -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-processors" class="form-label">Процессоры</label>
                    <select name="product_items-${productItemCounter}-processors" id="id_product_items-${productItemCounter}-processors" class="form-control" multiple>
                        {% for processor in processors %}
                            <option value="{{ processor.id }}">{{ processor.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-processor_notes" class="form-control mt-2" placeholder="Заметки о процессорах" rows="2"></textarea>
                </div>
    
                <!-- Motherboards -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-motherboards" class="form-label">Материнские платы</label>
                    <select name="product_items-${productItemCounter}-motherboards" id="id_product_items-${productItemCounter}-motherboards" class="form-control" multiple>
                        {% for motherboard in motherboards %}
                            <option value="{{ motherboard.id }}">{{ motherboard.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-motherboard_notes" class="form-control mt-2" placeholder="Заметки о материнских платах" rows="2"></textarea>
                </div>
    
                <!-- RAM -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-rams" class="form-label">Оперативная память</label>
                    <select name="product_items-${productItemCounter}-rams" id="id_product_items-${productItemCounter}-rams" class="form-control" multiple>
                        {% for ram in rams %}
                            <option value="{{ ram.id }}">{{ ram.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-ram_notes" class="form-control mt-2" placeholder="Заметки о памяти" rows="2"></textarea>
                </div>
    
                <!-- Storage -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-storages" class="form-label">Накопители</label>
                    <select name="product_items-${productItemCounter}-storages" id="id_product_items-${productItemCounter}-storages" class="form-control" multiple>
                        {% for storage in storages %}
                            <option value="{{ storage.id }}">{{ storage.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-storage_notes" class="form-control mt-2" placeholder="Заметки о накопителях" rows="2"></textarea>
                </div>
    
                <!-- Graphics -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-graphics" class="form-label">Графика</label>
                    <select name="product_items-${productItemCounter}-graphics" id="id_product_items-${productItemCounter}-graphics" class="form-control" multiple>
                        {% for graphic in graphics %}
                            <option value="{{ graphic.id }}">{{ graphic.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-graphics_notes" class="form-control mt-2" placeholder="Заметки о графике" rows="2"></textarea>
                </div>
    
                <!-- Operating Systems -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-operating_systems" class="form-label">Операционные системы</label>
                    <select name="product_items-${productItemCounter}-operating_systems" id="id_product_items-${productItemCounter}-operating_systems" class="form-control" multiple>
                        {% for operating_system in operating_systems %}
                            <option value="{{ operating_system.id }}">{{ operating_system.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-operating_system_notes" class="form-control mt-2" placeholder="Заметки о системах" rows="2"></textarea>
                </div>
    
                <!-- Screen Sizes -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-screen_sizes" class="form-label">Размеры экранов</label>
                    <select name="product_items-${productItemCounter}-screen_sizes" id="id_product_items-${productItemCounter}-screen_sizes" class="form-control" multiple>
                        {% for screen_size in screen_sizes %}
                            <option value="{{ screen_size.id }}">{{ screen_size.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-screen_size_notes" class="form-control mt-2" placeholder="Заметки о размерах экранов" rows="2"></textarea>
                </div>
    
                <!-- Screen Types -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-screen_types" class="form-label">Типы экранов</label>
                    <select name="product_items-${productItemCounter}-screen_types" id="id_product_items-${productItemCounter}-screen_types" class="form-control" multiple>
                        {% for screen_type in screen_types %}
                            <option value="{{ screen_type.id }}">{{ screen_type.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-screen_type_notes" class="form-control mt-2" placeholder="Заметки о типах экранов" rows="2"></textarea>
                </div>
    
                <!-- Screen Resolutions -->
                <div class="col-sm-6">
                    <label for="id_product_items-${productItemCounter}-screen_resolutions" class="form-label">Разрешения экранов</label>
                    <select name="product_items-${productItemCounter}-screen_resolutions" id="id_product_items-${productItemCounter}-screen_resolutions" class="form-control" multiple>
                        {% for screen_resolution in screen_resolutions %}
                            <option value="{{ screen_resolution.id }}">{{ screen_resolution.name }}</option>
                        {% endfor %}
                    </select>
                    <textarea name="product_items-${productItemCounter}-screen_resolution_notes" class="form-control mt-2" placeholder="Заметки о разрешениях экранов" rows="2"></textarea>
                </div>
                <!-- Touch Screens -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-touch_screens" class="form-label">Сенсорные экраны</label>
<select name="product_items-${productItemCounter}-touch_screens" id="id_product_items-${productItemCounter}-touch_screens" class="form-control" multiple>
    {% for touch_screen in touch_screens %}
        <option value="{{ touch_screen.id }}">{{ touch_screen.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-touch_screen_notes" class="form-control mt-2" placeholder="Заметки о сенсорных экранах" rows="2"></textarea>
</div>

<!-- Form Factors -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-form_factors" class="form-label">Форм-факторы</label>
<select name="product_items-${productItemCounter}-form_factors" id="id_product_items-${productItemCounter}-form_factors" class="form-control" multiple>
    {% for form_factor in form_factors %}
        <option value="{{ form_factor.id }}">{{ form_factor.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-form_factor_notes" class="form-control mt-2" placeholder="Заметки о форм-факторах" rows="2"></textarea>
</div>

<!-- Webcams -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-webcams" class="form-label">Веб-камеры</label>
<select name="product_items-${productItemCounter}-webcams" id="id_product_items-${productItemCounter}-webcams" class="form-control" multiple>
    {% for webcam in webcams %}
        <option value="{{ webcam.id }}">{{ webcam.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-webcam_notes" class="form-control mt-2" placeholder="Заметки о веб-камерах" rows="2"></textarea>
</div>

<!-- Keyboard Sets -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-keyboard_sets" class="form-label">Комплекты клавиатуры</label>
<select name="product_items-${productItemCounter}-keyboard_sets" id="id_product_items-${productItemCounter}-keyboard_sets" class="form-control" multiple>
    {% for keyboard_set in keyboard_sets %}
        <option value="{{ keyboard_set.id }}">{{ keyboard_set.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-keyboard_set_notes" class="form-control mt-2" placeholder="Заметки о комплектах клавиатуры" rows="2"></textarea>
</div>

<!-- Keyboard Backlights -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-keyboard_backlights" class="form-label">Подсветка клавиатуры</label>
<select name="product_items-${productItemCounter}-keyboard_backlights" id="id_product_items-${productItemCounter}-keyboard_backlights" class="form-control" multiple>
    {% for keyboard_backlight in keyboard_backlights %}
        <option value="{{ keyboard_backlight.id }}">{{ keyboard_backlight.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-keyboard_backlight_notes" class="form-control mt-2" placeholder="Заметки о подсветке клавиатуры" rows="2"></textarea>
</div>

<!-- Power Supplies -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-power_supplies" class="form-label">Блоки питания</label>
<select name="product_items-${productItemCounter}-power_supplies" id="id_product_items-${productItemCounter}-power_supplies" class="form-control" multiple>
    {% for power_supply in power_supplies %}
        <option value="{{ power_supply.id }}">{{ power_supply.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-power_supply_notes" class="form-control mt-2" placeholder="Заметки о блоках питания" rows="2"></textarea>
</div>

<!-- Sizes -->
<div class="col-sm-6">
<label for="id_product_items-${productItemCounter}-sizes" class="form-label">Размеры</label>
<select name="product_items-${productItemCounter}-sizes" id="id_product_items-${productItemCounter}-sizes" class="form-control" multiple>
    {% for size in sizes %}
        <option value="{{ size.id }}">{{ size.name }}</option>
    {% endfor %}
</select>
<textarea name="product_items-${productItemCounter}-size_notes" class="form-control mt-2" placeholder="Заметки о размерах" rows="2"></textarea>
</div>

<!-- Delete button -->
<div class="col-sm-12 mt-3">
<button type="button" class="btn btn-danger" onclick="deleteProductItem('product-item-${productItemCounter}')">Удалить продукт</button>
</div>
`;

// Append the new product item container to the products container
document.getElementById('products-container').appendChild(newProductItem);
});

// Function to delete a product item
function deleteProductItem(itemID) {
let itemToDelete = document.getElementById(itemID);
if (itemToDelete) {
itemToDelete.remove();
}
}
});
</script>




